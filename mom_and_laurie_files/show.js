(function(a){a(document).ready(function(){var g=window.TRIPIT,e=g.components;var d=function(h){var j=a("#selected-trip").val(),l=a("#new-trip-item-name").val(),k=a("#is-new-trip").val()==="1",i=a("#save-cancel-buttons"),h=h||true;if(!h||l===""||(!k&&j==="")){i.hide()}else{i.show()}},c=function(){a(".itUI-discloser").discloser();a(".itUI-cloneable").each(function(){var i=a(this),h={};if(i.hasClass("transportation")||i.hasClass("rail")){h.onBeforeClone=updateDisclosers}i.cloneable(h)});it.attachBoundITUIBehaviors();a(".itUI-fieldHelp").fieldHelp();window.TRIPIT.polyfill.placeholder.bind();a(".section:last, .segment:last").css("border-bottom","none")},b,f;e.bindCollapsibles();$body.on("click","a[data-related-trip-item-id]",function(i){var h=a(this).data("related-trip-item-id"),j=a('div.trip_item[data-trip-item-id="'+h+'"]');if(j.length>0){i.preventDefault();if(!j.find(".more_info_container").data("is-expanded")){j.find(".more_info_toggle").click()}a("body, html").scrollTop(j.offset().top)}});a(".gallery").gallery({shouldDisplayScrollButtons:false}).css("height","auto");$document.on("click","#new-trip-link",function(){var h=a("#new-trip-form-container"),i=a("#selected-trip");h.toggle();if(h.is(":visible")){a("#new-item-type").show("medium");i.val("").attr("disabled","disabled").addClass("disabled")}else{i.removeAttr("disabled").removeClass("disabled")}a("#is-new-trip").val(h.is(":visible")?1:0);d()});$document.on("change","#selected-trip",function(){if(a(this).val()!==""){a("#new-item-type").show()}d()});$document.on("change","#new-trip-item-name",function(){var j=a("#new-item-container"),i=a(this),h=i.val();j.empty().hide();if(h!==""){i.addClass("disabled").prop("disabled",true);j.addClass("loading vertical-spacer").show();a.ajax({url:it.global_baseURL+"trip_item/getTripItemForm/trip_item_name/"+h+"/id/"+a("#trip-item-id").val(),method:"GET",dataType:"json",success:function(k){var l=k.result_string;if(l){i.removeClass("disabled").removeProp("disabled");j.html(l).removeClass("loading vertical-spacer");c()}},error:function(){i.removeClass("disabled").removeProp("disabled").val("");j.empty().removeClass("loading vertical-spacer").hide()}})}d()});$document.on("click",".itUI-cancel",function(h){h.preventDefault();window.location.assign(it.global_baseURL+"trip/listUnfiledItems")});$document.on("click",".no-click",function(h){h.preventDefault();h.stopPropagation()});b=a("#new-trip-form-container").find(".itUI-error").length>0;f=a("#new-item-container").find(".itUI-error").length>0;d(b||f);if(!b){a("#new-trip-form-container, #new-item-type").hide()}else{c();a("#selected-trip").val("").prop("disabled",true).addClass("disabled")}})}(jQuery));